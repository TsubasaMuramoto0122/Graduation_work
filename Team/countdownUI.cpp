//=============================================================================
//
// カウントダウンUI処理 [countdownui.h]
// Author : 三上航世
//
//=============================================================================
//*****************************************************************************
//インクルードファイル
//*****************************************************************************
#include "countdownUI.h"
#include "fade.h"
#include "manager.h"
#include "sound.h"
#include "finish.h"

//*****************************************************************************
//静的
//*****************************************************************************

//*****************************************************************************
//マクロ
//*****************************************************************************
#define COUNT_TIME (60)

#if 1
//*****************************************************************************
//コンストラクタ
//*****************************************************************************
CCountdownUI::CCountdownUI(CScene::PRIORITY Priority) : CUI(Priority)
{

}

//*****************************************************************************
// デストラクタ
//*****************************************************************************
CCountdownUI::~CCountdownUI()
{

}
#endif

//*****************************************************************************
//初期化
//*****************************************************************************
HRESULT CCountdownUI::Init()
{
	m_nTime = 0;
	m_nPattern = 0;
	return S_OK;
}

//*****************************************************************************
//終了
//*****************************************************************************
void CCountdownUI::Uninit()
{
	if (m_pUI != NULL)
	{
		m_pUI = NULL;
	}
	CScene::Release();
}

//*****************************************************************************
//更新
//*****************************************************************************
void CCountdownUI::Update()
{
	if (CManager::GetPause() == false && CManager::GetCountdown() == false && CManager::GetGameEnd() == false)
	{
		m_nTime--;
		if (m_nTime <= 0)
		{
			m_nTime = COUNT_TIME;
			m_nPattern++;
			switch (m_nPattern)
			{
			case 1://3
				m_pUI = CUI::Create(D3DXVECTOR2(SCREEN_WIDTH * 0.5f, 250.0f), D3DXVECTOR2(70.0f, 120.0f), 3, D3DXCOLOR(1.0f, 1.0f, 1.0f, 1.0f));
				break;
			case 2://2
				m_pUI->SetTexture(2);
				break;
			case 3://1
				m_pUI->SetTexture(1);
				break;
			case 4://finish
				m_pUI->SetDeath(true);
				CFinish::Create();
				break;
			default:
				break;
			}
		}
	}
	else if (CManager::GetGameEnd() == true)
	{
		m_pUI->SetDeath(true);
	}
}

//描画・作成
#if 1
//*****************************************************************************
//描画
//*****************************************************************************
void CCountdownUI::Draw()
{
	
}

//*****************************************************************************
//作成
//*****************************************************************************
CCountdownUI *CCountdownUI::Create()
{
	CCountdownUI *pCountDownUI = NULL;
	pCountDownUI = new CCountdownUI(PRIORITY_UI);
	if (pCountDownUI != NULL)
	{
		pCountDownUI->Init();
	}
	return pCountDownUI;
}
#endif
