//=============================================================================
//
// カウントダウンUI処理 [countdownui.h]
// Author : 三上航世
//
//=============================================================================
//*****************************************************************************
//インクルードファイル
//*****************************************************************************
#include "countdownUI.h"
#include "fade.h"
#include "manager.h"
#include "sound.h"

//*****************************************************************************
//静的
//*****************************************************************************

//*****************************************************************************
//マクロ
//*****************************************************************************
#define COUNT_TIME (60)

#if 1
//*****************************************************************************
//コンストラクタ
//*****************************************************************************
CCountdownUI::CCountdownUI(CScene::PRIORITY Priority) : CUI(Priority)
{

}

//*****************************************************************************
// デストラクタ
//*****************************************************************************
CCountdownUI::~CCountdownUI()
{

}
#endif

//*****************************************************************************
//初期化
//*****************************************************************************
HRESULT CCountdownUI::Init()
{
	m_nTime = 0;
	m_nPattern = 0;
	return S_OK;
}

//*****************************************************************************
//終了
//*****************************************************************************
void CCountdownUI::Uninit()
{
	m_pUI = NULL;
	CScene::Release();
}

//*****************************************************************************
//更新
//*****************************************************************************
void CCountdownUI::Update()
{
	m_nTime--;
	if (m_nTime <= 0)
	{
		m_nTime = COUNT_TIME;
		m_nPattern++;
		switch (m_nPattern)
		{
		case 1://3
			m_pUI = CUI::Create(D3DXVECTOR3(SCREEN_WIDTH * 0.5f, 250.0f, 0.0f), D3DXVECTOR2(70.0f, 120.0f), 3, D3DXCOLOR(1.0f, 1.0f, 1.0f, 1.0f));
			break;
		case 2://2
			m_pUI->SetTexture(2);
			break;
		case 3://1
			m_pUI->SetTexture(1);
			break;
		case 4://finish
			m_pUI->SetTexture(13);
			m_pUI->SetSize(D3DXVECTOR2(460.0f, 180.0f));
			m_nTime += COUNT_TIME;
			CManager::SetGameEnd(true);
			CSound::Play(14);
			break;
		case 5://場面切り替え
			CFade::SetFade(CManager::MODE_RESULTRANK);
			m_nTime += 999999;
			break;
		default:
			break;
		}
	}
}

//描画・作成
#if 1
//*****************************************************************************
//描画
//*****************************************************************************
void CCountdownUI::Draw()
{
	
}

//*****************************************************************************
//作成
//*****************************************************************************
CCountdownUI *CCountdownUI::Create()
{
	CCountdownUI *pCountDownUI = NULL;
	pCountDownUI = new CCountdownUI(PRIORITY_UI);
	if (pCountDownUI != NULL)
	{
		pCountDownUI->Init();
	}
	return pCountDownUI;
}
#endif
